<!DOCTYPE html>
<html>
    <head>
		<meta charset="utf-8">
        <title>Study Group</title>
		
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
		<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
		<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

		
		<link rel="stylesheet" href="//ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css"/>
		<link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons"/>
		<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"/>
		<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css"/>
		{% load static %}
		<script src="{% static 'javascript/user.js'  %}"></script>
		<script src="{% static 'javascript/js_cookie.js'  %}"></script>
        <script src="{% static 'javascript/jquery.fancybox.js'  %}"></script>

        <link href="{% static 'stylesheets/simple-sidebar.css' %}" rel="stylesheet" type="text/css">
        <link href="{% static 'stylesheets/jquery.fancybox.css' %}" rel="stylesheet" type="text/css">
        <link href="{% static 'stylesheets/user.css' %}" rel="stylesheet" type="text/css">
        
        <script type="text/javascript">
        	
            $(document).ready(function() {
              showGroup();
            
				$(".missionBox").fancybox({
					'scrolling'		: 'no',
					'titleShow'		: false,
					'onClosed'		: function() {
					
						$("#name_checking_div").empty();
					}
				});	
			

			});
			function showAchievement() {
                $('#myContent').empty();

                var div = $('<div/>', {
                    'class': 'login_achievement'
                }).html('<h4>Login Achievement</h4>');
               	
                var img = $('<img/>', {
                    'class': 'achievement',
                    src: '{% static "images/logo.jpg" %}',
                    width: 150
                }).appendTo(div);

                var img = $('<img/>', {
                    'class': 'achievement',
                    src: '{% static "images/logo.jpg" %}',
                    width: 150
                }).appendTo(div);

                var img = $('<img/>', {
                    'class': 'achievement',
                    src: '{% static "images/logo.jpg" %}',
                    width: 150
                }).appendTo(div);

                var img = $('<img/>', {
                    'class': 'achievement',
                    src: '{% static "images/logo.jpg" %}',
                    width: 150
                }).appendTo(div);

                $('#myContent').append(div);
            }
            
            function showGroup() {
                $('#myContent').empty();
                {% if user_page_data %}
	                var groups = '';
                    {% for page_data in user_page_data %}
	                    // calculate progress
	                    var ct = new Date('{{ page_data.created_time }}').getTime();
						var ft = new Date('{{  page_data.finished_time }}').getTime();
						var nt = new Date().getTime();
	                    var alltime = ((ft - ct) / (1000 * 60 * 60 * 24));
	                    var perc = Math.floor(((nt - ct) / (1000 * 60 * 60 * 24))) / alltime * 100;
	                    if(alltime == 0)
		                    perc = 100;


	                    var img = '<img src="{% static "images/logo.jpg" %}" class="group_img col-md-2"></img>';
                        var name = '<a href="/group/{{ page_data.group_id }}" class="col-md-10"><h4 align="center">{{ page_data.group_name }}</h4></a>';
                        var info = '<p align="center">{{ page_data.intro }}</p>';
						var progress = '<div class="progress"><div class="progress-bar progress-bar-info progress-bar-striped" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: ' + perc + '%"></div></div>'
	                    groups += '<div class="list-group-item row">' + img + name + info + progress + '</div>';

                    {% endfor %}
	                $('#myContent').append('<div class="list-group">' + groups + '</div>');
                {% endif %}
            }
        </script>
    </head>
    <body>

        <!-- Navigation Bar -->
        <nav class="navbar navbar-inverse navbar-fixed-top" id="NavBar">
            <div class="container-fluid">
                <div class="navbar-header">
                    <a href="/" class="navbar-brand" style="color: #ddd; border: #000 1px;"><b>Study Group</b></a>
                </div>
				<div class="collapse navbar-collapse">

					<ul class="nav navbar-nav navbar-right navtabs">
						<li role="presentation" class="active"><a href="#">My Information</a></li>
						<li role="presentation"><a href="#" onclick="logout();">Log Out</a></li>
					</ul>
					<button type="button" class="btn btn-primary navbar-btn navbar-right" id="create_group_button" data-toggle="modal" data-target="#create_group_Modal">Create Group</button>

				</div>
            </div>
        </nav>

        <header>
	        <div class="exp">
                <b>LV.20</b>
                <div id="user_exp">
	                <div class="progress">
		                <div class="progress-bar progress-bar-info progress-bar-striped" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width:70%">
                            <span class="sr-only">70% Complete</span>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        <br class="space">

        <div id="wrapper" style="width: 95%" align="center">
	        <!-- Sidebar Wrapper -->
	        <div id="sidebar-wrapper" style="background: transparent;">
	            <ul type="none">
		            <h3><li><a href='#' class='myLink' onclick="showGroup()">My Group</a></li></h3>
		            <h3><li><a href="#" class="myLink" onclick="showMission()">Mission</a></li></h3>
		            <h3><li><a href='#' class='myLink' onclick="showAchievement()">Achievement</a></li></h3>
		            <h3><li><a href="#" class="myLink" onclick="showMailbox()">MailBox</a></li></h3>
	            </ul>
	        </div>
	        <div id="page-content-wrapper" style="width: 100%">
		        <!-- Container -->
		        <div class="container-fluid row">
			        <div id="myContent"></div>
		        </div>
	        </div>
        </div>




        <div style="display:none" id="name_checking_div">

		</div>


        <!-- Modal -->
		<div id="create_group_Modal" class="modal fade" role="dialog">
			<div class="modal-dialog">
				<!-- Modal content-->
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal">&times;</button>
						<div id="namediv">
							<h4 class="modal-title">Group Name</h4>
							<input type="text" class="form-control" name="group_name" id="group_name" placeholder="要將讀書會取作什麼呢？">
								</div>
					</div>
					<div class="modal-body">
						<div id="introdiv">
							<label>Introduction</label>
							<textarea class="form-control" name="intro" id="intro" rows="3"></textarea>
							<hr>
						</div>
						<div class="row">
							<div class="col-md-4 col-md-offset-2">
								<label>隱私性</label>
								<div class="radio">
									<input type="radio" name="private" id="private_op1"  value="0" checked>public
									</br>
									<input type="radio" name="private" id="private_op2"  value="1">private
								</div>
							</div>
							<div id="timediv" class="col-md-4">
								<label>結束時間</label>
								<div>
									<input id="finished_time_date" type="date">
								</div>
							</div>
						</div>

						<div id="clear" style="clear: both"></div>

						<hr>
						<div id="member_limitdiv">
							<fieldset>
								<label for="sel1">人數上限 (0為無限制)</label>
								<select name="member_limit" class="form-control" id="sel1">
									<option>0</option>
									<option>5</option>
									<option>10</option>
									<option>15</option>
									<option>20</option>
								</select>
							</fieldset>
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
						<button type="button" class="btn btn-primary" onclick="creategroup_submit()">Create</button>
					</div>
				</div>
			</div>
		</div>

        <nav class="navbar navbar-inverse navbar-fixed-bottom" >
			<ul>
		        <li class="copyright" type="none" align="center" style="color: #eee;vertical-align:middle;">Copyright © 2015 Study Group ALL Rights Reserved.</li>
	        </ul>
        </nav>

        <!--footer>
	        <ul>
		        <li class="copyright" type="none" align="center" style="color: #eee;vertical-align:middle;">Copyright © 2015 Study Group ALL Rights Reserved.</li>
	        </ul>
	        <br clear="space">
        </footer-->

    </body>
</html>